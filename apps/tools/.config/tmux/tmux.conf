#  __l tm__                    
# |_   _|                    
#   | |_ __ ___  _   ___  __
#   | | '_ ` _ \| | | \ \/ /
#   | | | | | | | |_| |>  < 
#   \_/_| |_| |_|\__,_/_/\_\

set-option -s default-terminal "tmux-256color"
set-option -gs terminal-overrides ",xterm-256color:Tc"
set -as terminal-overrides ',xterm*:sitm=\E[3m'
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

set-option -s escape-time 0
set-option -g mouse on
set -g aggressive-resize on
set-option -g base-index 1
set -g bell-action none
set -g xterm-keys on
set -g mode-keys vi

bind-key -T root WheelUpPane \
  if-shell -Ft= '#{?pane_in_mode,1,#{mouse_any_flag}}' \
    'send -Mt=' \
    'if-shell -Ft= "#{alternate_on}" "send -t= Up" "copy-mode -et="'

bind-key -T root WheelDownPane \
  if-shell -Ft= '#{?pane_in_mode,1,#{mouse_any_flag}}' \
    'send -Mt=' \
    'if-shell -Ft= "#{alternate_on}" "send -t= Down" "send -Mt="'

bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

bind C-g display-popup -E "ta hotspot"
bind t set-option -g status

set-option -g display-panes-time 2000
set-option -g display-panes-active-colour brightred
set-option -g display-panes-colour $colorPrimary
set-option -g display-time 1500
set-option -g message-style fg=brightred

unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

set-option -g renumber-windows on
set-window-option -g clock-mode-colour brightred 
set-window-option -g clock-mode-style 24 
set-window-option -g mode-keys vi
set-window-option -g pane-base-index 1
set-window-option -g window-status-current-style 'fg=brightred,bold'
set-window-option -ag window-status-current-style 'bg=black'
set-window-option -g window-status-style 'fg=white'
set-window-option -g window-status-separator ''

set-option -g xterm-keys on
bind-key r source-file ~/.config/tmux/tmux.conf \; display 'Tmux Configuration Reloaded'
bind-key U source ~/.config/tmux/tmux.conf \; display 'Tmux Configuration Reloaded'

set-option -g status on
set-option -g status-position bottom
set-option -g status-bg default
set-option -g status-fg default
set-option -g status-interval 30
set-option -g status-justify left
set-option -g status-keys vi
set-option -g status-right-length 100

bind-key -n M-s set-window-option synchronize-panes
bind-key -n M-Tab last-window
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4
bind-key -n M-5 select-window -t 5
bind-key -n M-6 select-window -t 6
bind-key -n M-7 select-window -t 7
bind-key -n M-8 select-window -t 8
bind-key -n M-9 select-window -t 9
bind-key -n M-n select-window -t:+1
bind-key -n M-p select-window -t:-1
bind-key -n M-d break-pane
bind-key -n M-c command-prompt -p "Name of new window: " "new-window -n '%%'"

bind-key - split-window -v -c '#{pane_current_path}'
bind-key \\ split-window -h -c '#{pane_current_path}'

bind-key h select-pane -L
bind-key l select-pane -R
bind-key j select-pane -D
bind-key k select-pane -U

bind-key -r H resize-pane -L 2
bind-key -r L resize-pane -R 2
bind-key -r J resize-pane -D 2
bind-key -r K resize-pane -U 2

bind-key > swap-pane -t +1
bind-key < swap-pane -t -1

is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n 'M-h' if-shell "$is_vim" 'send-keys M-h' 'select-pane -L'
bind-key -n 'M-j' if-shell "$is_vim" 'send-keys M-j' 'select-pane -D'
bind-key -n 'M-k' if-shell "$is_vim" 'send-keys M-k' 'select-pane -U'
bind-key -n 'M-l' if-shell "$is_vim" 'send-keys M-l' 'select-pane -R'

bind-key -T copy-mode-vi 'M-h' select-pane -L
bind-key -T copy-mode-vi 'M-j' select-pane -D
bind-key -T copy-mode-vi 'M-k' select-pane -U
bind-key -T copy-mode-vi 'M-l' select-pane -R
bind-key -T copy-mode-vi 'M-Tab' select-pane -l

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-urlview'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'catppuccin/tmux'

set -g @plugin 'roosta/tmux-pop'
set -g @tmux-pop-color "brightblack"
set -g @resurrect-strategy-vim 'session'
set -g @continuum-restore 'on'



set -g status-right "#{E:@catppuccin_status_application}"
set -ag status-right "#{E:@catppuccin_status_session}"

source-file ~/.config/tmux/theme.conf



if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"


run '~/.tmux/plugins/tpm/tpm'

set -g status-left ""

# Style for inactive windows
set -gF window-status-format "#[fg=brightblack,bg=default,nobold,noitalics,nounderscore] │ #[fg=white]##I #[fg=brightcyan]##W #[fg=brightblack]│"

# Style for the active (current) window
set -gF window-status-current-format "#[fg=white]#[fg=black,bg=white,bold] ##I #[fg=magenta]##W #[fg=white]"
